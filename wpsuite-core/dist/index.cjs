"use strict";var F=Object.create;var f=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var J=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var E=(e,t)=>{for(var n in t)f(e,n,{get:t[n],enumerable:!0})},_=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of J(t))!Z.call(e,i)&&i!==n&&f(e,i,{get:()=>t[i],enumerable:!(r=H(t,i))||r.enumerable});return e};var j=(e,t,n)=>(n=e!=null?F($(e)):{},_(t||!e||!e.__esModule?f(n,"default",{value:e,enumerable:!0}):n,e)),z=e=>_(f({},"__esModule",{value:!0}),e);function d(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return Uint8Array.from(atob(t),n=>n.charCodeAt(0))}var b,R,y=l(()=>{"use strict";b=(e,t)=>{let r=Uint8Array.from(atob(e),i=>i.charCodeAt(0)).map((i,s)=>i^t+s&255);return new TextDecoder().decode(r)},R=async e=>{let t=globalThis.grecaptcha,n=e?t?.enterprise:void 0,r=n?.ready??t?.ready,i=n?.execute??t?.execute;if(typeof i!="function")return{execute:void 0};try{return typeof r=="function"&&await new Promise(s=>r(()=>s())),{execute:i}}catch{return{execute:void 0}}}});function w(e,t){return`wpsuite:${e}:${t}`}function q(e,t=8e3){return()=>new Promise(n=>{if(e.status==="available")return n("available");if(e.status==="error")return n("error");!e.status||e.status;let r=w(e.key,"ready"),i=w(e.key,"error"),s=()=>o("available"),p=()=>o("error"),a,o=u=>{window.removeEventListener(r,s),window.removeEventListener(i,p),a!==void 0&&window.clearTimeout(a),n(u)};window.addEventListener(r,s,{once:!0}),window.addEventListener(i,p,{once:!0}),a=window.setTimeout(()=>o("unavailable"),t)})}function Q(e){return t=>{window.addEventListener(w(e,"ready"),()=>t(),{once:!0})}}function A(e,t){let n=t?.timeoutMs??8e3;return e.availability??=q(e,n),e.onReady??=Q(e.key),e}var k=l(()=>{"use strict"});var C,T,W=l(()=>{"use strict";y();C=b("ISEsOw4RHR5NRSEJ6Oe35/DU1u76wrv90+K758qi9uDM/vr56srI/tal+Q==",116),T=b("I0E0DT8KADgTGRo+4/Tx7Mb89MPDxuHT/um2wN/wzdzw9M7lwNHu76ztyw==",116)});var O={};E(O,{getConfig:()=>ce});function S(e){try{return new URL(e.includes("://")?e:`http://${e}`).hostname.toLowerCase()}catch{return e.replace(/\/+$/,"").toLowerCase()}}function ie(e){let t=S(e);return t.startsWith("www.")?t.slice(4):t}function D(e){let t=S(e);if(te.test(t)||ne.test(t)||t==="localhost")return!0;let n=(0,K.parse)(t,{allowPrivateDomains:!0});return!!(!n.domain||!n.publicSuffix||ee.includes(n.publicSuffix))}function re(e){let t=S(e);return D(t)||L.test(t)?!0:t.split(".").some(n=>L.test(n))}function oe(e){return D(e)||re(e)}function se(e,t){return t?ie(e)===t:!1}function ae(e,t){return oe(e)?{free:!0,covered:!0}:{free:!1,covered:se(e,t)}}var K,B,U,c,v,L,ee,te,ne,ce,X=l(()=>{"use strict";W();y();G();K=require("tldts"),c=h();c?v=c.siteSettings:v={};L=/\b(dev|test|testing|staging|stage|qa|uat|preview|demo|sandbox|preprod|beta|canary)\b/i,ee=["localhost","local","test","invalid","example","lan","internal"],te=/^(127\.)|^(10\.)|^(192\.168\.)|^(172\.(1[6-9]|2\d|3[0-1])\.)/,ne=/^(::1$)|(^fc00:)|(^fd)/i;ce=async()=>{let{jwtVerify:e,importJWK:t}=await import("jose"),n=null;if(v.subscriber){let i=await t({kty:"EC",x:B,y:U,crv:"P-256"},"ES256"),s=new Date().getFullYear(),p=Math.floor((Date.now()-new Date(s,0,1).getTime())/(1e3*60*60*24*7)),a=await fetch(c.uploadUrl+"lic.jws?t="+c.siteSettings.lastUpdate+"&y="+s+"&w="+p).then(o=>o.ok?o.text():null).catch(()=>null);if(a)try{let o=location.hostname.split(":")[0],{payload:u}=await e(a,i,{algorithms:["ES256"]}),P=ae(o,u.domain);if(!P.free&&!P.covered)throw new Error("Invalid domain in JWT");let x=u.key.split(":"),I=d(x[0]),M=d(x[1]),m=(await fetch(c.uploadUrl+"config.enc?t="+c.siteSettings.lastUpdate).then(g=>g.ok?g.text():null).catch(()=>null))?.split(":");if(m?.length===2){let g=d(m[0]),Y=d(m[1]),N=await crypto.subtle.importKey("raw",I,{name:"AES-GCM"},!1,["decrypt"]),V=await crypto.subtle.decrypt({name:"AES-GCM",iv:M},N,new Uint8Array([...g,...Y]));n=JSON.parse(new TextDecoder().decode(V)),n.subscriptionType=u.subscriptionType}}catch(o){console.error(o.message)}}return n??null};B=C;U=T});var pe={};E(pe,{TEXT_DOMAIN:()=>le,attachDefaultPluginRuntime:()=>A,getConfig:()=>de,getPlugin:()=>ue,getRecaptcha:()=>R,getWpSuite:()=>h});module.exports=z(pe);function h(){return globalThis.WpSuite}function ue(e){return globalThis.WpSuite?.plugins[e]}var le,de,G=l(()=>{y();k();le="smartcloud-wpsuite",de=async e=>{let n=await(await Promise.resolve().then(()=>(X(),O))).getConfig();return n&&(n={...n[e],subscriptionType:n.subscriptionType}),n}});G();0&&(module.exports={TEXT_DOMAIN,attachDefaultPluginRuntime,getConfig,getPlugin,getRecaptcha,getWpSuite});
