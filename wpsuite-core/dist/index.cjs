"use strict";var y=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(t&&(e=t(t=0)),e);var _=(t,e)=>{for(var n in e)y(t,n,{get:e[n],enumerable:!0})},Y=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of O(e))!I.call(t,r)&&r!==n&&y(t,r,{get:()=>e[r],enumerable:!(o=D(e,r))||o.enumerable});return t};var N=t=>Y(y({},"__esModule",{value:!0}),t);function l(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4;)e+="=";return Uint8Array.from(atob(e),n=>n.charCodeAt(0))}var M,c,h,f=m(()=>{"use strict";M=async t=>{let e=c("emUgRnVEemN0U1BhUXB3amlxc1h0dm9JQklUbXh5Z2YaSRZeZ2EABH5lZgU=",t),n=Uint8Array.from(atob(e),o=>o.charCodeAt(0));return window.crypto.subtle.importKey("raw",n,{name:"AES-CBC",length:256},!1,["decrypt"])},c=(t,e)=>{let o=Uint8Array.from(atob(t),r=>r.charCodeAt(0)).map((r,s)=>r^e+s&255);return new TextDecoder().decode(o)},h=async(t,e)=>{if(t==="")return Promise.resolve({});try{let[n,o]=t.split(":"),r=await M(e),s=new Uint8Array(atob(n).split("").map(a=>a.charCodeAt(0))),i=new Uint8Array(atob(o).split("").map(a=>a.charCodeAt(0))),u=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:s},r,i);return JSON.parse(new TextDecoder().decode(u))}catch(n){console.error(n);return}}});var E,C,x=m(()=>{"use strict";f();E=c("XlhXQnl4dnciLEpgf34sfm9NTXdtaxBUfEsQTn0bTVlzR0FAXWNjV3kMUg==",11),C=c("XDhPdEhja1F8cHFXdG1qdVllb1pUb0p6UUAdaWhJdmVPTXVcd3hFRgNEYA==",11)});var k={};_(k,{getConfig:()=>q});function w(t){try{return new URL(t.includes("://")?t:`http://${t}`).hostname.toLowerCase()}catch{return t.replace(/\/+$/,"").toLowerCase()}}function V(t){let e=w(t);return e.startsWith("www.")?e.slice(4):e}function U(t){let e=w(t);if(H.test(e)||J.test(e)||e==="localhost")return!0;let n=(0,T.parse)(e,{allowPrivateDomains:!0});return!!(!n.domain||!n.publicSuffix||G.includes(n.publicSuffix))}function Z(t){let e=w(t);return U(e)||A.test(e)?!0:e.split(".").some(n=>A.test(n))}function j(t){return U(t)||Z(t)}function F(t,e){return e?V(t)===e:!1}function $(t,e){return j(t)?{free:!0,covered:!0}:{free:!1,covered:F(t,e)}}var d,T,P,R,b,A,G,H,J,q,v=m(()=>{"use strict";d=require("jose");x();f();T=require("tldts");typeof WpSuite<"u"?b=WpSuite.siteSettings:b={};A=/\b(dev|test|testing|staging|stage|qa|uat|preview|demo|sandbox|preprod|beta|canary)\b/i,G=["localhost","local","test","invalid","example","lan","internal"],H=/^(127\.)|^(10\.)|^(192\.168\.)|^(172\.(1[6-9]|2\d|3[0-1])\.)/,J=/^(::1$)|(^fc00:)|(^fd)/i;q=async()=>{let t=null;if(b.subscriber){let n=await(0,d.importJWK)({kty:"EC",x:P,y:R,crv:"P-256"},"ES256"),o=new Date().getFullYear(),r=Math.floor((Date.now()-new Date(o,0,1).getTime())/(1e3*60*60*24*7)),s=await fetch(WpSuite.uploadUrl+"lic.jws?t="+WpSuite.siteSettings.lastUpdate+"&y="+o+"&w="+r).then(i=>i.ok?i.text():null).catch(()=>null);if(s)try{let i=location.hostname.split(":")[0],{payload:u}=await(0,d.jwtVerify)(s,n,{algorithms:["ES256"]}),a=$(i,u.domain);if(!a.free&&!a.covered)throw new Error("Invalid domain in JWT");let S=u.key.split(":"),L=l(S[0]),W=l(S[1]),g=(await fetch(WpSuite.uploadUrl+"config.enc?t="+WpSuite.siteSettings.lastUpdate).then(p=>p.ok?p.text():null).catch(()=>null))?.split(":");if(g.length===2){let p=l(g[0]),B=l(g[1]),K=await crypto.subtle.importKey("raw",L,{name:"AES-GCM"},!1,["decrypt"]),X=await crypto.subtle.decrypt({name:"AES-GCM",iv:W},K,new Uint8Array([...p,...B]));t=JSON.parse(new TextDecoder().decode(X)),t.subscriptionType=u.subscriptionType}}catch(i){console.error(i.message)}}return t??null};P=E;R=C});var tt={};_(tt,{TEXT_DOMAIN:()=>z,decryptData:()=>h,deobfuscate:()=>c,getConfig:()=>Q});module.exports=N(tt);f();var z="hub-for-wpsuiteio",Q=async t=>{let n=await(await Promise.resolve().then(()=>(v(),k))).getConfig();return n&&(n={...n[t],subscriptionType:n.subscriptionType}),n};0&&(module.exports={TEXT_DOMAIN,decryptData,deobfuscate,getConfig});
